<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: image.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: image.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Component } from "./component.js";
import { Defaults } from "./defaults.js";
import { Style } from "./style.js";

/**
 * A component that displays an image loaded from a URL.
 * &lt;div>&lt;img src="https://www.minimalcomps2.com/images/image.png"/>&lt;/div>
 * @extends Component
 */
export class Image extends Component {
  /**
   * Constructor
   * @param {HTMLElement} parent - The element to add this image to.
   * @param {number} x - The x position of the image.
   * @param {number} y - The y position of the image.
   * @param {string} url - The URL of the image to display.
   */
  constructor(parent, x, y, url) {
    super(parent, x, y);
    this._url = url;

    this.createChildren();
    this.createStyle();
    this.createListeners();

    this.setSize(Defaults.image.width, 100);
    this.load();
    this.addToParent();
  }

  //////////////////////////////////
  // Core
  //////////////////////////////////

  createChildren() {
    this.image = this.createElement(this.wrapper, "img", "MinimalImage");
  }

  createStyle() {
    const style = document.createElement("style");
    style.textContent = Style.image;
    this.shadowRoot.append(style);
  }

  createListeners() {
    this.onLoad = this.onLoad.bind(this);
    this.image.addEventListener("load", this.onLoad);
  }

  //////////////////////////////////
  // Handlers
  //////////////////////////////////

  onLoad() {
    this.origWidth = this.image.width;
    this.origHeight = this.image.height;
    this.updateImageSize();
    this.image.style.visibility = "visible";
  }

  //////////////////////////////////
  // General
  //////////////////////////////////

  load() {
    this.image.style.visibility = "hidden";
    this.image.setAttribute("src", this._url);
  }

  updateImageSize() {
    const aspectRatio = this.origWidth / this.origHeight;
    this.image.width = this.width;
    this.image.height = this.height = this.width / aspectRatio;
  }

  //////////////////////////////////
  // Getters/Setters
  // alphabetical. getter first.
  //////////////////////////////////

  get enabled() {
    return super.enabled;
  }

  set enabled(enabled) {
    super.enabled = enabled;
    if (this._enabled) {
      this.image.setAttribute("class", "MinimalImage");
    } else {
      this.image.setAttribute("class", "MinimalImageDisabled");
    }
  }

  /**
   * Gets and sets the height of the image. This is read only because the height will be set according to the assigned width and the aspect ratio of the loaded image.
   */
  get height() {
    return this.image.height;
  }

  /**
   * Gets and sets the url of the image to be displayed. Setting this value will trigger the load of the new image.
   */
  get url() {
    return this._url;
  }

  set url(url) {
    this._url = url;
    this.load();
  }

  /**
   * Gets and sets the width of the image. When the image is loaded, it will be set to the assigned width. The height will be set according to the assigned with and the aspect ratio of the loaded image.
   */
  get width() {
    return super.width;
  }

  set width(width) {
    super.width = width;
    if (this.image.width) {
      this.updateImageSize();
    }
  }
}

customElements.define("minimal-image", Image);

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Button.html">Button</a></li><li><a href="Canvas.html">Canvas</a></li><li><a href="Checkbox.html">Checkbox</a></li><li><a href="ColorPicker.html">ColorPicker</a></li><li><a href="Dropdown.html">Dropdown</a></li><li><a href="HBox.html">HBox</a></li><li><a href="HSlider.html">HSlider</a></li><li><a href="Image.html">Image</a></li><li><a href="Knob.html">Knob</a></li><li><a href="Label.html">Label</a></li><li><a href="NumericStepper.html">NumericStepper</a></li><li><a href="Panel.html">Panel</a></li><li><a href="ProgressBar.html">ProgressBar</a></li><li><a href="RadioButton.html">RadioButton</a></li><li><a href="TextArea.html">TextArea</a></li><li><a href="TextBox.html">TextBox</a></li><li><a href="TextInput.html">TextInput</a></li><li><a href="VBox.html">VBox</a></li><li><a href="VSlider.html">VSlider</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Defaults">Defaults</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Wed May 26 2021 20:10:24 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
